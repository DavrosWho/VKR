# VKR
Web-приложение для автоматизации работы предприятия. Основная часть
## В целом о проекте
Данная программа является частью проекта "Web-приложение для автоматизации работы предприятия". Здесь реализованы основные функции приложения.  
Авторизационный функционал и реализация API Gateway для связи с этим функционалом данной программы по ссылкам ниже.  

Для правильной работы приложения необходимо запустить все три программы.  
[Ссылка на часть с авторизационным функционалом](https://github.com/DavrosWho/vkr_auth)  
[Ссылка на реализацию API Gateway](https://github.com/DavrosWho/vkr_api_gateway)  

- _Так как для доступа к данному микросервису пользователи должны предварительно авторизоваться в системе, реализован авторизационный фильтр, 
отбрасывающий запросы от неавторизованных источников._

Используемые технологии всей серверной части проекта: Java, Spring Boot, REST, API Gateway, PostgreSQL
## Как запустить 
Проект разработан в среде IntelliJ IDEA (Протестирован в Build #IC-221.6008.13, built on July 19, 2022)  
Настройте IDE для запуска /src/main/java/org/example/Main.java

## О приложении
### Из чего состоит 
Основные его компоненты - это проекты, модули задач и правила.
- Проект – наибольшая структурная единица в любой модели. По сути, это система взаимосвязанных между собой задач. 
- Проекты состоят из созданных пользователями модулей задач. Модуль можно считать ключевой единицей системы. 
Он является отображением некоего реального рабочего процесса и хранит об этом необходимые данные, такие как название, описание, 
статус, приоритет, дедлайн и другие. 
- В модуле можно оставить комментарии и создать для него свод правил.
- Также приложение имеет функцию оповещения пользователей о различных событиях.

### Как функционирует
Пользователи могут создавать свои проекты и добавлять в них участников с разными ролями. В зависимости от роли (участник, админ, создатель) 
пользователи имеют определённые права в рамках проектов и модулей.
Участники внутри проекта могут создавать, редактировать и удалять модули задач.  
За каждым модулем может быть закреплено множество пользователей с разными ролями.

- Также приведём пример возможной модели: _в проекте «подготовка производства» находятся модули задач «закупка оборудования», «установка оборудования» и 
«настройка оборудования». У каждой задачи есть свои ответственные лица, отчитывающиеся внутри модулей о своей работе с помощью комментариев и изменения 
статуса задачи._

### О правилах
Итак, в модулях можно создавать правила, но зачем они нужны? Правила позволяют связывать модули в единую автоматизированную систему. _Польовательский 
конструктор новых правил приложением не предусмотрен._  
Каждое правило имеет тип. Он определяет условие выполнения правила и действия, которые необходимо совершить после этого самого выполнения.  
Действия, определённые типом, происходят со связанными модулями, указывающимися в правиле до его выполнения.  
Хочется отметить, что связывать правилами можно модули из разных проектов, что позволяет объединять частично независимые наборы задач в одну большую систему. 

- Простой пример правила: _у модуля «закупка оборудования» есть правило типа «начать работы по завершению текущей задачи», и в правиле указан связанный модуль 
«установка оборудования». Некий ответственный закупил оборудование и сменил статус текущей задачи на «Завершено», в связи с чем в связанном модуле статус 
автоматически поменялся на «В процессе» и всем ответственным за него пользователям пришло оповещение о начале работ._


## Структура базы данных 
Ключевыми сущностями, с которыми работает приложение, являются пользователи, проекты и модули, в связи с чем в базе данных реализованы таблицы users, 
projects и modules соответственно. Так как у каждого проекта может быть несколько участников, а у каждого модуля – несколько ответственных, 
реализованы таблицы user_project и user_module. Пользователи могут оставлять комментарии о своей работе в модулях, для этого реализована таблица comments. 
Для каждого модуля пользователи могут создавать некоторые правила, в связи с чем реализована таблица rules. Правил может быть больше одного, поэтому реализована 
таблица rule_module. При определённых обстоятельствах пользователям приходят оповещения, связанные с модулями, для этих целей реализована таблица notifications. 

_Всего база данных насчитывает 9 таблиц. Её структура приведена на рисунке ниже:_
![image](https://github.com/DavrosWho/VKR/assets/71879137/2bdaf325-30d4-482c-88de-06bb69737792)

## Архитектура приложения
Данное приложение следует многоуровневой иерархической архитектуре. Состоит она из следующих слоев:
- Слой представления
- Бизнес-слой
- Слой сохраняемости
- Слой базы данных

_Архитектура представлена ниже:_
![image](https://github.com/DavrosWho/vkr_auth/assets/71879137/d0800a39-a6a1-4fa3-a7b3-0f0122b2dd0d)

Далее кратко указано, каким образом работает приложение, построенное на основе подобной «слоистой» архитектуры.
- Здесь представлены классы валидаторов, классы представлений и сервисные классы.
- Spring Boot использует все модули Spring-подобных Spring MVC, Spring Data и т.д. Архитектура Spring Boot похожа на архитектуру Spring MVC, за исключением того, что в Spring Boot нет необходимости в классах DAO и DAOImpl.
- Создается уровень доступа к данным в котором выполняются операции CRUD.
- Клиент делает HTTP-запросы.
- Запрос поступает к контроллеру, а контроллер отображает этот запрос и обрабатывает его. После этого он при необходимости вызывает логику службы.
- На сервисном уровне выполняется вся бизнес-логика. Он выполняет логику данных, которые отображаются в JPA с классами моделей.
